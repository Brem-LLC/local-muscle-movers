---
import { createReader } from '@keystatic/core/reader';
import keystaticConfig from 'keystatic.config';
import Layout from '@layouts/Base.astro'
import ShortHero from '@components/ShortHero.astro'
import MovingChecklist from '@components/Resourcespage/MovingChecklist.astro'
import Policies from '@components/Resourcespage/Policies.astro';

const reader = createReader(process.cwd(), keystaticConfig);
const resData = await reader.collections.pages.read('resources');
const shortHeroBlock = resData?.componentBlocks.filter(bl => bl.discriminant === 'shortHero')
const movingChecklistBlock = resData?.componentBlocks.filter(bl => bl.discriminant === 'movingChecklist')
const policiesBlock = resData?.componentBlocks.filter(bl => bl.discriminant === 'policiesAndContracts')
---

<Layout title="Resources">
	{shortHeroBlock[0] && <ShortHero block={shortHeroBlock[0].value} />}
	{movingChecklistBlock[0] && <MovingChecklist block={movingChecklistBlock[0].value} />}
	{policiesBlock[0] && <Policies block={policiesBlock[0].value} />}
</Layout>
