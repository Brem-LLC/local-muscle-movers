---
import Layout from '@layouts/Base.astro'
import Hero from '@components/Hero.astro'
import Header from '@components/Header.astro'
import Footer from '@components/Footer.astro'
import CTA from '@components/CTA.astro'
import Reviews from '@components/Reviews.astro'
import TrustableTeam from '@components/TrustableTeam.astro'
import Services from '@components/Services.astro'
import { createReader } from '@keystatic/core/reader';
import keystaticConfig from '../../keystatic.config';
import ReviewCTA from '@components/ReviewCTA.astro'
const reader = createReader(process.cwd(), keystaticConfig);
const homeData = await reader.collections.pages.read('home');
const heroData = homeData?.componentBlocks.filter(block => block.discriminant == 'banner');
const videoAndTextArea = homeData?.componentBlocks.filter(block => block.discriminant == 'videoText');
const selectedServicesArea = homeData?.componentBlocks.filter(block => block.discriminant == 'serviceSelector');
const reviewCTAArea = homeData?.componentBlocks.filter(block => block.discriminant == 'testimonialCTA');
---

<Layout title="Home">
	<Header />
	<Hero heroData={heroData[0].value} />
	<Services videoAndTextArea={videoAndTextArea[0].value} selectedServicesArea={selectedServicesArea[0].value} />
	<ReviewCTA reviewContent={reviewCTAArea[0].value} />
	<CTA />
	<Footer />
</Layout>
