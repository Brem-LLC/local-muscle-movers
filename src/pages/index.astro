---
import Layout from '@layouts/Base.astro'
import Hero from '@components/Hero.astro'
import Header from '@components/Header.astro'
import Footer from '@components/Footer.astro'
import CTA from '@components/CTA.astro'
import Reviews from '@components/Reviews.astro'
import TrustableTeam from '@components/TrustableTeam.astro'
import Services from '@components/Services.astro'
import { getCollection } from 'astro:content';
const services = await getCollection('services');
const testimonials = await getCollection('testimonials');
import { createReader } from '@keystatic/core/reader';
import keystaticConfig from '../../keystatic.config';
const reader = createReader(process.cwd(), keystaticConfig);
const homeData = await reader.collections.pages.read('home');
const heroData = homeData?.componentBlocks.filter(block => block.discriminant == 'banner');
const homeServicesData = homeData?.componentBlocks.filter(block => block.discriminant == 'videoText');
---

<Layout title="Home">
	<Header />
	<Hero heroData={heroData[0].value} />
	<Services services={services} servicesData={homeServicesData[0].value} />
	<Reviews testimonials={testimonials} />
	<TrustableTeam />
	<CTA />
	<Footer />
</Layout>
